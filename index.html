<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Dein Tagesgedanke</title>

  <style>
    body {
      margin: 0;
      height: 100vh;
      background: rgba(0,0,0,0.85);
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    }

    .popup {
      background: white;
      border-radius: 16px;
      padding: 28px;
      max-width: 90%;
      text-align: center;
      box-shadow: 0 20px 60px rgba(0,0,0,0.4);
      animation: fadeIn 0.4s ease;
    }

    h1 {
      font-size: 1.2rem;
      margin-bottom: 16px;
      opacity: 0.6;
    }

    p {
      font-size: 1.3rem;
      line-height: 1.4;
    }

    button {
      margin-top: 24px;
      padding: 10px 18px;
      border: none;
      border-radius: 10px;
      background: #000;
      color: #fff;
      font-size: 1rem;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95); }
      to   { opacity: 1; transform: scale(1); }
    }
  </style>
</head>

<body>

  <div class="popup">
    <h1>Gedanke des Tages</h1>
    <p id="spruch"></p>
    <button onclick="window.close()">Schließen</button>
  </div>

<script>
  const sprueche = [
    "Jeder Tag ist eine neue Chance.",
    "Du bist weiter, als du denkst.",
    "Kleine Schritte sind auch Fortschritt.",
    // … bis 365 Sprüche
  ];

  const spruchElement = document.getElementById("spruch");

  function getBerlinerDatum() {
    const parts = new Intl.DateTimeFormat("de-DE", {
      timeZone: "Europe/Berlin",
      year: "numeric",
      month: "2-digit",
      day: "2-digit"
    }).formatToParts(new Date());

    const map = {};
    parts.forEach(p => map[p.type] = p.value);
    return new Date(`${map.year}-${map.month}-${map.day}`);
  }

  function getSpruchIndex() {
    const heute = getBerlinerDatum();
    const jahresStart = new Date(heute.getFullYear(), 0, 1);
    const tag = Math.floor((heute - jahresStart) / 86400000);
    return tag % sprueche.length;
  }

  function zeigeSpruch(animated = false) {
    const neuerSpruch = sprueche[getSpruchIndex()];

    if (!animated) {
      spruchElement.textContent = neuerSpruch;
      spruchElement.classList.add("fade-in");
      return;
    }

    spruchElement.classList.remove("fade-in");
    spruchElement.classList.add("fade-out");

    setTimeout(() => {
      spruchElement.textContent = neuerSpruch;
      spruchElement.classList.remove("fade-out");
      spruchElement.classList.add("fade-in");
    }, 600);
  }

  function millisBisMitternachtBerlin() {
    const jetzt = new Date();
    const berlinJetzt = new Date(
      new Intl.DateTimeFormat("en-US", {
        timeZone: "Europe/Berlin",
        hour12: false,
        year: "numeric",
        month: "2-digit",
        day: "2-digit",
        hour: "2-digit",
        minute: "2-digit",
        second: "2-digit"
      }).format(jetzt).replace(/,/g, "")
    );

    const morgen = new Date(berlinJetzt);
    morgen.setHours(24, 0, 0, 0);

    return morgen - berlinJetzt;
  }

  // Initial anzeigen
  zeigeSpruch();

  // Tageswechsel planen
  setTimeout(() => {
    zeigeSpruch(true);
    setInterval(() => zeigeSpruch(true), 86400000);
  }, millisBisMitternachtBerlin());
</script>
  
</body>
</html>
